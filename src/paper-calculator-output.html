<!--
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
  <head>
    <link rel="import" href="../bower_components/polymer/polymer.html">
    <link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<dom-module id="paper-calculator-output">
  <style include="iron-flex iron-flex-alignment">

      :host {
        display: block;
      }

      .output {
        position: relative;
        width: 100%;
        height: 100%;
        padding-right: 30px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        background-color: transparent;
        color: #b3b3b3;
        overflow: hidden;
      }
/*
      .output.show-result {
          color: #eee;
	  background-color: #7F7;
      }
      .output.error {
	  color: #eee;
	  background-color: #F77;
      }
*/
      .expression-outer {
        width: 100%;
        height: 100%;
        font-size: 5.625em;
        font-weight: 100;
        text-align: right;
        overflow: hidden;
      }

      .show-result > .expression-outer {
        height: 38%;
        font-size: 2.5em;
        font-weight: 400;
      }

      #expression {
        white-space: nowrap;
      }

      .output.error #expression {
        display: none;
      }

      #error {
        display: none;
        /* color: #eee; */
      }

      .output.error #error {
        display: block;
      }

      .result {
        visibility: hidden;
      }

      .show-result > .result {
        visibility: visible;
        height: 62%;
        font-weight: 400;
      }

      .result-equal {
        padding: 0 30px;
        font-size: 2.5em;
      }

      .result-value {
        font-size: 5em;
        overflow: hidden;
      }

    </style>
  <template>
    <div class$="{{_updateClass(expression, error, result)}}">
      <div class="expression-outer layout horizontal center end-justified">
        <div id="expression">{{expression}}</div>
        <div id="error">{{error}}</div>
      </div>
      <div class="result layout horizontal center">
        <div class="result-equal">=</div>
        <div class="result-value layout flex horizontal end-justified">{{result}}</div>
      </div>
    </div>
  </template>
  <script>
    Polymer({
	is: 'paper-calculator-output',
	properties: {
            error: { notify: true },
            expression: { notify: true },
            result: { notify: true }
	},
	_updateClass: function (expression, error, result) {
	    var c = 'output ' + (error!=='' ? 'error ' : '') + (result!=='' && error==='' ? ' show-result' : '')
	    console.log("updateClass(ex: "+expression+", re: "+result+", er: "+error+") returns "+c)
	    return c;
	},
	
    });
  </script>
</dom-module>
